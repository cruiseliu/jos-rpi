JOS-RPi
=======

Port of MIT JOS to Raspberry Pi.

Usage
-----

Use `mkdir -p build/lib && make` to build.

You will find `kernel.elf` and `kernel.img` in project directory.

If you have a Raspberry Pi with Raspbian, copy `kernel.img` to the boot partition and add following lines to `config.txt`:

    framebuffer_depth=32
    fraembuffer_ignore_alpha=1

You can either connect your RPi's UART port to computer as a TTY, or use it directly by HDMI display and USB keyboard.
Please note that UART input is disabled when a keyboard is found.

You may use [raspbootin](https://github.com/mrvn/raspbootin) to simplify UART configuration.

If you prefer an emulator such as [QEMU](https://github.com/Torlus/qemu/tree/rpi), just load `kernel.elf`.

Documentation generated by doxygen. It's included in the repository in case my teacher or TA have not used doxygen before.

Roadmap
-------

  * ~~Lab 1~~
    * ~~Bootloader~~
    * ~~Framebuffer~~
    * ~~Text ouput~~
    * ~~UART I/O~~
    * ~~Console~~
    * ~~Fromatted strings~~
    * ~~Kernel shell~~
    * ~~Backtrace~~
    * ~~Symbol table~~
    * ~~Colorful output~~

  * Lab 2
    * ~~High address~~
    * MMU utils
    * Free pages management
    * Buddy system
    * ......

TODO
----

  * Put source files into subdirectories
  * Implement my own USB keyboard driver

References
----------

 1. [MIT JOS](http://pdosnew.csail.mit.edu/6.828/2014/)
 2. [OSDev tutorial](http://wiki.osdev.org/ARM_RaspberryPi_Tutorial_C) (bootloader, UART I/O)
 3. [Cambridge tutorial](http://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/os/) (framebuffer, keyboard)
 4. [eLinux RPi framebuffer article](http://elinux.org/RPi_Framebuffer)
 5. [Proggy font](http://www.proggyfonts.net/download/)
 6. [raspbootin](https://github.com/mrvn/raspbootin)
 7. [Chromium OS](https://chromium.googlesource.com/chromiumos/third_party/u-boot-v1/+/master/arch/arm/lib/_uldivmod.S)
 8. [MMU example](https://github.com/dwelch67/raspberrypi/tree/master/mmu)
